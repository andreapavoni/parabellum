{% extends "layouts/base.html" %}
{% block title %}{{t!("game.village.fields")}} ‚Äì PARABELLUM{% endblock %}

{% block body %}
{% if let Some(user) = current_user %}
<div class="container mx-auto mt-4 md:mt-6 px-2 md:px-4 flex flex-col md:flex-row justify-center items-center md:items-start gap-8 pb-12">
    <div class="flex flex-col items-center w-full md:w-auto">
        <h1 class="text-xl font-bold mb-4 w-full text-left md:text-left">
          {{  user.village.name }} ({{  user.village.position.x }}|{{  user.village.position.y }})
        </h1>

        {% let slots = resource_slots %}
        <div class="map-container-responsive">
            <a class="hex {{ slots[0].class }} occupied"
               href="/build?s=1"
               style="top: 0px; left: 60px;"
               title="{{t!("game.village.slots.occupied", name = slots[0].name, level = slots[0].level)}}">
                <span class="level">
                    {{ slots[0].level }}
                </span>
            </a>
            <a class="hex {{ slots[1].class }} occupied"
               href="/build?s=2"
               style="top: 0px; left: 120px;"
               title="{{t!("game.village.slots.occupied", name = slots[1].name, level = slots[1].level)}}">
                <span class="level">
                    {{ slots[1].level }}
                </span>
            </a>
            <a class="hex {{ slots[2].class }} occupied"
               href="/build?s=3"
               style="top: 0px; left: 180px;"
               title="{{t!("game.village.slots.occupied", name = slots[2].name, level = slots[2].level)}}">
                <span class="level">
                    {{ slots[2].level }}
                </span>
            </a>

            <a class="hex {{ slots[3].class }} occupied"
               href="/build?s=4"
               style="top: 52px; left: 30px;"
               title="{{t!("game.village.slots.occupied", name = slots[3].name, level = slots[3].level)}}">
                <span class="level">
                    {{ slots[3].level }}
                </span>
            </a>
            <a class="hex {{ slots[4].class }} occupied"
               href="/build?s=5"
               style="top: 52px; left: 90px;"
               title="{{t!("game.village.slots.occupied", name = slots[4].name, level = slots[4].level)}}">
                <span class="level">
                    {{ slots[4].level }}
                </span>
            </a>
            <a class="hex {{ slots[5].class }} occupied"
               href="/build?s=6"
               style="top: 52px; left: 150px;"
               title="{{t!("game.village.slots.occupied", name = slots[5].name, level = slots[5].level)}}">
                <span class="level">
                    {{ slots[5].level }}
                </span>
            </a>
            <a class="hex {{ slots[6].class }} occupied"
               href="/build?s=7"
               style="top: 52px; left: 210px;"
               title="{{t!("game.village.slots.occupied", name = slots[6].name, level = slots[6].level)}}">
                <span class="level">
                    {{ slots[6].level }}
                </span>
            </a>

            <a class="hex {{ slots[7].class }} occupied"
               href="/build?s=8"
               style="top: 104px; left: 0px;"
               title="{{t!("game.village.slots.occupied", name = slots[7].name, level = slots[7].level)}}">
                <span class="level">
                    {{ slots[7].level }}
                </span>
            </a>
            <a class="hex {{ slots[8].class }} occupied"
               href="/build?s=9"
               style="top: 104px; left: 60px;"
               title="{{t!("game.village.slots.occupied", name = slots[8].name, level = slots[8].level)}}">
                <span class="level">
                    {{ slots[8].level }}
                </span>
            </a>

            <a class="village"
               href="/village"
               title="{{t!("game.village.title")}}">
            </a>

            <a class="hex {{ slots[9].class }} occupied"
               href="/build?s=10"
               style="top: 104px; left: 180px;"
               title="{{t!("game.village.slots.occupied", name = slots[9].name, level = slots[9].level)}}">
                <span class="level">
                    {{ slots[9].level }}
                </span>
            </a>
            <a class="hex {{ slots[10].class }} occupied"
               href="/build?s=11"
               style="top: 104px; left: 240px;"
               title="{{t!("game.village.slots.occupied", name = slots[10].name, level = slots[10].level)}}">
                <span class="level">
                    {{ slots[10].level }}
                </span>
            </a>

            <a class="hex {{ slots[11].class }} occupied"
               href="/build?s=12"
               style="top: 156px; left: 30px;"
               title="{{t!("game.village.slots.occupied", name = slots[11].name, level = slots[11].level)}}">
                <span class="level">
                    {{ slots[11].level }}
                </span>
            </a>
            <a class="hex {{ slots[12].class }} occupied"
               href="/build?s=13"
               style="top: 156px; left: 90px;"
               title="{{t!("game.village.slots.occupied", name = slots[12].name, level = slots[12].level)}}">
                <span class="level">
                    {{ slots[12].level }}
                </span>
            </a>
            <a class="hex {{ slots[13].class }} occupied"
               href="/build?s=14"
               style="top: 156px; left: 150px;"
               title="{{t!("game.village.slots.occupied", name = slots[13].name, level = slots[13].level)}}">
                <span class="level">
                    {{ slots[13].level }}
                </span>
            </a>
            <a class="hex {{ slots[14].class }} occupied"
               href="/build?s=15"
               style="top: 156px; left: 210px;"
               title="{{t!("game.village.slots.occupied", name = slots[14].name, level = slots[14].level)}}">
                <span class="level">
                    {{ slots[14].level }}
                </span>
            </a>

            <a class="hex {{ slots[15].class }} occupied"
               href="/build?s=16"
               style="top: 208px; left: 60px;"
               title="{{t!("game.village.slots.occupied", name = slots[15].name, level = slots[15].level)}}">
                <span class="level">
                    {{ slots[15].level }}
                </span>
            </a>
            <a class="hex {{ slots[16].class }} occupied"
               href="/build?s=17"
               style="top: 208px; left: 120px;"
               title="{{t!("game.village.slots.occupied", name = slots[16].name, level = slots[16].level)}}">
                <span class="level">
                    {{ slots[16].level }}
                </span>
            </a>
            <a class="hex {{ slots[17].class }} occupied"
               href="/build?s=18"
               style="top: 208px; left: 180px;"
               title="{{t!("game.village.slots.occupied", name = slots[17].name, level = slots[17].level)}}">
                <span class="level">
                    {{ slots[17].level }}
                </span>
            </a>
        </div>
        {% include "partials/_building_queue.html" %}
    </div>

    <div class="w-full max-w-[360px] md:w-56 pt-4 md:pt-12 border-t md:border-t-0 border-gray-200 md:border-none">
        <div class="flex flex-row md:flex-col justify-between md:justify-start gap-8 md:gap-0">

            <div class="flex-1">
                <h3 class="font-bold mb-3 text-sm">{{t!("game.village.resources.title")}}:</h3>
                <div class="text-xs space-y-3">
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>üå≤ {{t!("game.village.resources.lumber")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.lumber }}/{{t!("game.hour")}}</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>üß± {{t!("game.village.resources.clay")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.clay }}/{{t!("game.hour")}}</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>‚õèÔ∏è {{t!("game.village.resources.iron")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.iron }}/{{t!("game.hour")}}</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>üåæ {{t!("game.village.resources.crop")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.crop }}/{{t!("game.hour")}}</span>
                    </div>
                </div>
            </div>

            <div class="flex-1 md:mt-8">
                <h3 class="font-bold mb-2 text-sm md:mt-6">{{t!("game.village.troops.title")}}:</h3>
                <div class="text-xs text-gray-500 italic">
                  {{t!("game.village.troops.no_units")}}
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
