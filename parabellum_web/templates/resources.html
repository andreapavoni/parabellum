{% extends "layouts/base.html" %}
{% block title %}{{t!("game.village.resources")}} ‚Äì PARABELLUM{% endblock %}

{% block body %}
{% if let Some(user) = current_user %}
<div class="container mx-auto mt-4 md:mt-6 px-2 md:px-4 flex flex-col md:flex-row justify-center items-center md:items-start gap-8 pb-12">

    <div class="flex flex-col items-center w-full md:w-auto">
        <h1 class="text-xl font-bold mb-4 w-full text-left md:text-left">
          {{  user.village.name }} ({{  user.village.position.x }}|{{  user.village.position.y }})
        </h1>

        <div class="map-container-responsive">
            <a class="hex wood {% if let Some(slot) = user.village.get_building_by_slot_id(1) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=1"
               style="top: 0px; left: 60px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(1) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(1) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex crop {% if let Some(slot) = user.village.get_building_by_slot_id(2) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=2"
               style="top: 0px; left: 120px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(2) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(2) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex iron {% if let Some(slot) = user.village.get_building_by_slot_id(3) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=3"
               style="top: 0px; left: 180px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(3) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(3) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>

            <a class="hex crop {% if let Some(slot) = user.village.get_building_by_slot_id(4) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=4"
               style="top: 52px; left: 30px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(4) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(4) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex wood {% if let Some(slot) = user.village.get_building_by_slot_id(5) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=5"
               style="top: 52px; left: 90px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(5) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(5) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex iron {% if let Some(slot) = user.village.get_building_by_slot_id(6) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=6"
               style="top: 52px; left: 150px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(6) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(6) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex crop {% if let Some(slot) = user.village.get_building_by_slot_id(7) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=7"
               style="top: 52px; left: 210px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(7) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(7) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>

            <a class="hex wood {% if let Some(slot) = user.village.get_building_by_slot_id(8) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=8"
               style="top: 104px; left: 0px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(8) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(8) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex clay {% if let Some(slot) = user.village.get_building_by_slot_id(9) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=9"
               style="top: 104px; left: 60px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(9) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(9) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>

            <a class="village"
               href="/village"
               title="{{t!("game.village.title")}}">
            </a>

            <a class="hex wood {% if let Some(slot) = user.village.get_building_by_slot_id(10) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=10"
               style="top: 104px; left: 180px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(10) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(10) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex crop {% if let Some(slot) = user.village.get_building_by_slot_id(11) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=11"
               style="top: 104px; left: 240px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(11) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(11) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>

            <a class="hex clay {% if let Some(slot) = user.village.get_building_by_slot_id(12) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=12"
               style="top: 156px; left: 30px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(12) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(12) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex clay {% if let Some(slot) = user.village.get_building_by_slot_id(13) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=13"
               style="top: 156px; left: 90px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(13) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(13) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex crop {% if let Some(slot) = user.village.get_building_by_slot_id(14) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=14"
               style="top: 156px; left: 150px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(14) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(14) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex iron {% if let Some(slot) = user.village.get_building_by_slot_id(15) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=15"
               style="top: 156px; left: 210px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(15) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(15) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>

            <a class="hex clay {% if let Some(slot) = user.village.get_building_by_slot_id(16) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=16"
               style="top: 208px; left: 60px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(16) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(16) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex iron {% if let Some(slot) = user.village.get_building_by_slot_id(17) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=17"
               style="top: 208px; left: 120px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(17) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(17) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
            <a class="hex crop {% if let Some(slot) = user.village.get_building_by_slot_id(18) %}{% if slot.building.level > 0 %}occupied{% endif %}{% endif %}"
               href="/build?s=18"
               style="top: 208px; left: 180px;"
               title="{% if let Some(slot) = user.village.get_building_by_slot_id(18) %}{{t!("game.village.slots.occupied", name = slot.building.name, level = slot.building.level)}}{% else %}{{t!("game.village.slots.empty")}}{% endif %}">
                <span class="level">
                  {% if let Some(slot) = user.village.get_building_by_slot_id(18) %}
                    {{ slot.building.level }}
                  {% else %}
                    0
                  {% endif %}
                </span>
            </a>
        </div>
        {% include "partials/_building_queue.html" %}
    </div>

    <div class="w-full max-w-[360px] md:w-56 pt-4 md:pt-12 border-t md:border-t-0 border-gray-200 md:border-none">
        <div class="flex flex-row md:flex-col justify-between md:justify-start gap-8 md:gap-0">

            <div class="flex-1">
                <h3 class="font-bold mb-3 text-sm">{{t!("game.village.resources.title")}}:</h3>
                <div class="text-xs space-y-3">
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>üå≤ {{t!("game.village.resources.lumber")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.lumber }}/{{t!("game.hour")}}</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>üß± {{t!("game.village.resources.clay")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.clay }}/{{t!("game.hour")}}</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>‚õèÔ∏è {{t!("game.village.resources.iron")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.iron }}/{{t!("game.hour")}}</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-100 pb-2">
                        <span>üåæ {{t!("game.village.resources.crop")}}</span>
                        <span class="font-bold text-gray-900">+{{ user.village.production.effective.crop }}/{{t!("game.hour")}}</span>
                    </div>
                </div>
            </div>

            <div class="flex-1 md:mt-8">
                <h3 class="font-bold mb-2 text-sm md:mt-6">{{t!("game.village.troops.title")}}:</h3>
                <div class="text-xs text-gray-500 italic">
                  {{t!("game.village.troops.no_units")}}
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
