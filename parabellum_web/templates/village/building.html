{% extends "layouts/base.html" %}
{% block title %}{{t!("game.building.title")}} â€“ PARABELLUM{% endblock %}
{% block body %}
{% if current_user.is_some() %}
<div class="container mx-auto mt-6 px-4 pb-12">
    <div class="max-w-2xl mx-auto bg-white shadow rounded-lg border border-gray-200 p-6">
        {% if let Some(error) = ctx.flash_error %}
        <div class="mb-4 p-3 border border-red-200 bg-red-50 text-red-700 text-sm rounded">
            {{ error }}
        </div>
        {% endif %}
        {% if ctx.building_queue_full %}
        <div class="mb-4 p-3 border border-amber-200 bg-amber-50 text-amber-800 text-sm rounded">
            {{ t!("game.building.construction_queue_full") }}
        </div>
        {% endif %}
        {% if let Some(construction) = ctx.current_construction %}
        <div class="mb-4 p-3 border border-amber-200 bg-amber-50 rounded text-sm text-gray-700">
            <div class="font-semibold text-gray-800">
                {{t!("game.building.construction_in_progress", name = construction.building_name, level = construction.target_level)}}
            </div>
            <div class="mt-1">
                {{t!("game.building.time_remaining")}}:
                <span class="font-mono font-semibold text-gray-900 countdown-timer"
                      data-seconds="{{ construction.time_seconds }}">
                    {{ construction.time_remaining }}
                </span>
            </div>
        </div>
        {% endif %}

        {% block building_content %}{% endblock %}
    </div>
</div>
{% endif %}
{% endblock %}
