{% extends "layouts/base.html" %}
{% block title %}{{t!("game.village.title")}} â€“ PARABELLUM{% endblock %}
{% block body %}
{% if let Some(user) = layout.current_user %}
  <div class="container mx-auto mt-4 md:mt-6 px-2 md:px-4 flex flex-col md:flex-row justify-center items-center md:items-start gap-8 pb-12">
      <div class="flex flex-col items-center w-full md:w-auto">
        <h1 class="text-xl font-bold mb-4 w-full text-left md:text-left">
          {{  user.village.name }} ({{  user.village.position.x }}|{{  user.village.position.y }})
        </h1>

          <div class="village-container-responsive relative">
              <a class="{{ self.slot_classes(40, "wall-ring-link", false) }}"
                 href="/build?s=40"
                 title="{{ self.slot_title(40) }}"
                 aria-label="{{ self.slot_title(40) }}">
                  <svg class="{{ self.slot_classes(40, "wall-ring", true) }}"
                       viewBox="0 0 100 100"
                       role="img"
                       aria-hidden="true">
                      <title>{{ self.slot_title(40) }}</title>
                      <circle class="wall-ring-track" cx="50" cy="50" r="51"></circle>
                  </svg>
              </a>

              <a class="{{ self.slot_classes(19, "building-slot main-building", true) }}"
                   href="/build?s=19"
                   style="top: 50%; left: 50%;"
                   title="{{ self.slot_title(19) }}">
                  <span class="slot-label">{{t!("game.village.main_building")}}</span>
              </a>
              <a class="{{ self.slot_classes(39, "building-slot rally-point", true) }}"
                   href="/build?s=39"
                   style="top: 55%; left: 67%;"
                   title="{{ self.slot_title(39) }}"></a>

              <a class="{{ self.slot_classes(20, "building-slot", true) }}"
                   href="/build?s=20"
                   style="top: 28%; left: 47%;"
                   title="{{ self.slot_title(20) }}">
                  <span class="slot-label">1</span>
              </a>
              <a class="{{ self.slot_classes(21, "building-slot", true) }}"
                   href="/build?s=21"
                   style="top: 35%; left: 63%;"
                   title="{{ self.slot_title(21) }}">
                  <span class="slot-label">2</span>
              </a>
              <a class="{{ self.slot_classes(22, "building-slot", true) }}"
                   href="/build?s=22"
                   style="top: 37%; left: 32%;"
                   title="{{ self.slot_title(22) }}">
                  <span class="slot-label">3</span>
              </a>
              <a class="{{ self.slot_classes(23, "building-slot", true) }}"
                   href="/build?s=23"
                   style="top: 72%; left: 53%;"
                   title="{{ self.slot_title(23) }}">
                  <span class="slot-label">4</span>
              </a>
              <a class="{{ self.slot_classes(24, "building-slot", true) }}"
                   href="/build?s=24"
                   style="top: 63%; left: 38%;"
                   title="{{ self.slot_title(24) }}">
                  <span class="slot-label">5</span>
              </a>
              <a class="{{ self.slot_classes(25, "building-slot", true) }}"
                   href="/build?s=25"
                   style="top: 52%; left: 27%;"
                   title="{{ self.slot_title(25) }}">
                  <span class="slot-label">6</span>
              </a>

              <a class="{{ self.slot_classes(26, "building-slot", true) }}"
                   href="/build?s=26"
                   style="top: 22%; left: 24%;"
                   title="{{ self.slot_title(26) }}">
                  <span class="slot-label">7</span>
              </a>
              <a class="{{ self.slot_classes(27, "building-slot", true) }}"
                   href="/build?s=27"
                   style="top: 36%; left: 15%;"
                   title="{{ self.slot_title(27) }}">
                  <span class="slot-label">8</span>
              </a>
              <a class="{{ self.slot_classes(28, "building-slot", true) }}"
                   href="/build?s=28"
                   style="top: 52%; left: 12%;"
                   title="{{ self.slot_title(28) }}">
                  <span class="slot-label">9</span>
              </a>
              <a class="{{ self.slot_classes(29, "building-slot", true) }}"
                   href="/build?s=29"
                   style="top: 67%; left: 18%;"
                   title="{{ self.slot_title(29) }}">
                  <span class="slot-label">10</span>
              </a>
              <a class="{{ self.slot_classes(30, "building-slot", true) }}"
                   href="/build?s=30"
                   style="top: 77%; left: 28%;"
                   title="{{ self.slot_title(30) }}">
                  <span class="slot-label">11</span>
              </a>
              <a class="{{ self.slot_classes(31, "building-slot", true) }}"
                   href="/build?s=31"
                   style="top: 13%; left: 40%;"
                   title="{{ self.slot_title(31) }}">
                  <span class="slot-label">12</span>
              </a>

              <a class="{{ self.slot_classes(32, "building-slot", true) }}"
                   href="/build?s=32"
                   style="top: 86%; left: 43%;"
                   title="{{ self.slot_title(32) }}">
                  <span class="slot-label">13</span>
              </a>
              <a class="{{ self.slot_classes(33, "building-slot", true) }}"
                   href="/build?s=33"
                   style="top: 85%; left: 60%;"
                   title="{{ self.slot_title(33) }}">
                  <span class="slot-label">14</span>
              </a>

              <a class="{{ self.slot_classes(34, "building-slot", true) }}"
                   href="/build?s=34"
                   style="top: 76%; left: 75%;"
                   title="{{ self.slot_title(34) }}">
                  <span class="slot-label">15</span>
              </a>
              <a class="{{ self.slot_classes(35, "building-slot", true) }}"
                   href="/build?s=35"
                   style="top: 63%; left: 85%;"
                   title="{{ self.slot_title(35) }}">
                  <span class="slot-label">16</span>
              </a>
              <a class="{{ self.slot_classes(36, "building-slot", true) }}"
                   href="/build?s=36"
                   style="top: 45%; left: 88%;"
                   title="{{ self.slot_title(36) }}">
                  <span class="slot-label">17</span>
              </a>
              <a class="{{ self.slot_classes(37, "building-slot", true) }}"
                   href="/build?s=37"
                   style="top: 30%; left: 80%;"
                   title="{{ self.slot_title(37) }}">
                  <span class="slot-label">18</span>
              </a>
              <a class="{{ self.slot_classes(38, "building-slot", true) }}"
                   href="/build?s=38"
                   style="top: 15%; left: 62%;"
                   title="{{ self.slot_title(38) }}">
                  <span class="slot-label">19</span>
              </a>
          </div>
          {% include "partials/_building_queue.html" %}
      </div>

      <div class="w-full max-w-[400px] md:w-56 pt-4 md:pt-12 border-t md:border-t-0 border-gray-200 md:border-none">
          <h3 class="font-bold mb-3 text-sm border-b border-gray-300 pb-2">{{t!("game.village.villages")}}:</h3>
          <ul class="text-xs space-y-2 list-none pl-0">
              {% for village in user.villages %}
              <li class="flex justify-between items-center p-1 rounded {% if village.id == user.village.id %}font-bold bg-gray-100 cursor-default{% else %}cursor-pointer hover:bg-gray-100{% endif %}">
                  <span class="flex items-center">
                    <span class="w-2 h-2 rounded-full mr-2 {% if village.id == user.village.id %}bg-orange-500{% else %}bg-green-500{% endif %}"></span>
                    {{ village.name }}
                  </span>
                  <span class="{% if village.id == user.village.id %}text-gray-600{% else %}text-gray-500{% endif %}">
                    ({{ village.position.x }}|{{ village.position.y }})
                  </span>
              </li>
              {% endfor %}
          </ul>
      </div>
  </div>
{% else %}
  <div class="container mx-auto px-4 py-12 text-center text-gray-600">
    {{t!("errors.unauthorized")}}
  </div>
{% endif %}
{% endblock %}
